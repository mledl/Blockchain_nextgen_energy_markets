% This is samplepaper.tex, a sample chapter demonstrating the
% LLNCS macro package for Springer Computer Science proceedings;
% Version 2.20 of 2017/10/04
%
\documentclass[runningheads]{llncs}
%
\usepackage{graphicx}
% Used for displaying a sample figure. If possible, figure files should
% be included in EPS format.
%
% If you use the hyperref package, please uncomment the following line
% to display URLs in blue roman font according to Springer's eBook style:
% \renewcommand\UrlFont{\color{blue}\rmfamily}

\begin{document}
%
\title{Powered by Blockchain: Next-Generation Energy Markets}
%
%\titlerunning{Abbreviated paper title}
% If the paper title is too long for the running head, you can set
% an abbreviated paper title here
%
\author{Martin Ledl}
%
\authorrunning{M. Ledl}
% First names are abbreviated in the running head.
% If there are more than two authors, 'et al.' is used.
%
\institute{Technical University of Vienna, Austria}
%
\maketitle              % typeset the header of the contribution
%
\begin{abstract}
The abstract should briefly summarize the contents of the paper in
150--250 words.

\keywords{Blockchain  \and Decentralized Energy Markets \and Decentralized Energy Trading \and Smart Grid}
\end{abstract}
%
%
%
\section{Introduction}

\section{Principles}

\subsection{Blockchain}

\subsection{Smart Grid}
As the current electrical systems is not suitable for integrating the increasing amount of renewable energy sources in real-time into the wholesale market, a change of the current system to a smart grid should propose a brighter future. Smart grid systems aim for taking the locality of energy generators into account and thus empower energy trading between prosumers and consumers within a local energy community. \cite{mengelkamp_lem}
TODO: MORE EXPLANATION

\section{Energy Markets Today}
In order to be able to understand what problems currently exist and which could be tackled by application of Blockchain technology, it is very important to understand how electricity is traded nowadays and which parties are involved. Moreover, this is important to get a look into the challenges with the current system and which challenges will arise by the application of Blockchain technology or the implementation of a smart grid in general.

\subsection{Current Network Topology and Players}
The electricity system is made up of the physical infrastructure used for generation, distribution and transportation as well as the energy market itself. Therefore, people usually buy electricity not directly from generators itself, but by a wholesale company in between. Besides purchasing electricity there are further fees for using the physical infrastructure itself which cover among others maintenance costs of the grid.
This physical grid can be roughly divided into electricity generators and means of electricity transportation. Such a transportation system further consists of systems which are responsible for long-distance energy transmission and distribution systems which aim for connecting industrial and private customers to the grid in order to be able to supply them with electricity. Furthermore, there are different national or sub-national transmission system operators and distribution system operators that are responsible for maintaining the physical infrastructure and ensure stable energy distribution (e.g. for Vienna there are the “Wiener Netze”). Moreover, there are interconnections between grids also across national borders to have alternative in ensuring the electricity demand and supply. \cite{eu_energy_market}
For the other components of a electricity system, the energy market, there are various entities interacting with each other.

\subsubsection{Electricity Suppliers} buy electricity directly from energy generators and finally resell it to customers. Thus, industrial customer and residential customers usually do not purchase electricity directly from generators.

\subsubsection{Consumers} can be industrial or residential consumers and buy electricity from suppliers.

\subsubsection{Electricity generators} are responsible for actually generating electricity from various sources. The European Union differentiates between two types of electricity generators, firm-capacity and variable-capacity generators. Firm-capacity generators reliably deliver electricity and can be adjusted or turned on/off according to the current demand (e.g. coal, nuclear, gas, hydro with dam, biomass, etc.). Variable-capacity generators on the other hand depend on the current environmental state as they leverage wind or sunlight for example and therefore only generate electricity at certain times.  Moreover, the flexibility of firm-capacity generators varies a lot where hydro power is the most and nuclear power the least flexible with respect to latency from power on until actual energy is generated.
To underline the importance to develop a grid that can serve electricity in a stable manner with less firm-capacity generators, having a look at members of the two generator classes reveals that the firm-capacity generators contain fossil fuel (e.g. coal, natural gas, etc.) which reserve will be exhausted in a couple of decades. This will decrease the amount of energy source that can serve higher energy demand within relatively shot amount of time and therefore, the importance of more reliable integration of variable-capacity generators (e.g. all sort of renewable energy) strongly increases. This should also be a motivation that drives the restructuring and investment process in the current energy system. Besides that, burning of fossil fuels emits carbon dioxide into the atmosphere which is currently one of the main drivers of global warming. \cite{eu_energy_market}

\subsubsection{Regulators} define clear rules that has to be followed by all market entities in order to keep the market and its prices stable and make it work as it currently is. Moreover, regulators keep track if the electricity market works as it should. The Agency for Cooperation of Energy Regulators defines the network codes at EU level. Those network codes define guidelines for transnational electricity markets and networks. On national level, independent regulators set operational rules for electricity markets.

\subsubsection{Transmission System Operators} are in charge of the long-distance electricity transportation and of maintaining the transportation system and further investments in it in order to enlarge or restructure its topology. Thus, they ensure the systems stability and are therefore paid by other entities for using their infrastructure for electricity transportation.

\subsubsection{Distributions System Operators} earn money by distributing the electricity, which has been transported over a transmission system operator’s infrastructure, to the customer. \newline

The physical infrastructure of transmission and distribution networks is connected to electricity consumers and generators the electric grid. This network aims for keeping balance between demand and supply of electricity within the grid. Such stability guarantees that there is no lack of electricity at no point of time for example. Another really notable aspect is that the electricity flow within the grid cannot be controlled and due to physical laws, the electricity flows along the path of lowest resistance. Thus, *MENTION ELECTRICITY MIXTURE FROM BELOW.
The consumed electricity is generated by different systems that vary greatly in their size and scale. A generator can be a nuclear, coal or large hydro power plant, but also rather small-scale photovoltaic systems. \cite{eu_energy_market}


\subsection{Current Energy Markets}
In the European Union, market types depend on their geographical location and vary in their size and level from transnational wholesale markets to local retail markets. In a traditional retail market, suppliers offer contracts which cover national regulators’ rules and consumers usually choose a suitable contract offered by a supplier of their choice. Suppliers resell energy from generating entities and are responsible for invoicing the offered electricity. Such contracts state the electricity’s origin as well as fees which support certain policies and network investments.
Wholesale markets bring together electricity generators, suppliers and large industrial consumers under a different pricing schema as for residential customers. Furthermore, wholesale energy markets are coupled on a transnational regional level to increase flexibility and be able to address demand across national borders.\cite{eu_energy_market}

\subsection{Balancing Supply and Demand}
The key equation for balance is that the electrical supply must be equal to the demand in order to have a stable network without shortages. The base amount of electricity is served by variable-capacity generators and demand peaks are addressed using firm-capacity generators due to their flexibility. An increase in variable capacity (increase in renewable systems) has also led to an increase in firm capacity to ensure stability. Demand and supply balancing in the European Union are done using a three-level reserve system, where the different levels have increased supply latency. Furthermore, variable capacity is prioritized and often meets the required demand which results in lower market share for firm capacity and therefore such generators earn less money these days. Nevertheless, the are most important in times of supply shortages. \cite{eu_energy_market}

\subsection{Arising Challenges}
The European Union \cite{eu_energy_market} stated in 2016 that there are a couple of challenges that need to be addressed by the future electricity system. First of all, the general electricity demand is increasing within the European Union due to the ongoing electrification (e.g. spread of electrical cars). Moreover, there is a huge aim for reduction of $CO_2$ emissions by generating electricity from variable renewable sources. This results in an increase of electricity transportation due to the increase of variable generators.\newline
Furthermore, the number of private prosumers is increasing and therefore more potential consumer generate a certain amount of energy themselves which results in a decrease in grid consumption and less revenue for conventional generators and grid operators. Unfortunately, this can lead to an increase in electricity prices and grid fees for regular consumers. \newline
Those challenges need to be effectively and efficiently tackled in the close future and therefore energy service companies are currently developing enhanced electrical systems that can address the current drive of energy generation and consumption in a more suitable way. Such adoptions require massive investments of local, national and transnational level in order to provide network resilience and competitive pricing for all network entities.\cite{eu_energy_market}

\textbf{TODO: write a few sentences in order to come to smart grid, microgrids and blockchains}


\section{Blockchain in the Energy Sector}
This section aims for giving an overview of interesting and promising Blockchain based solutions within the energy section. Most solutions take advantage of the technology's promising properties to build decentralized energy markets that enable better integration for prosumers and renewable energy sources in general. Focusing on local neighbourhoods, this can decrease the electricity price and have other benefits for local participants in such systems. Other solutions incentivise renewable energy production and consumption through rewarding certain coins for positive participation in the system. After introducing interesting research in the field of Blockchain for energy systems, the arising challenges in the field are discussed.

\subsection{Local energy market}
Local energy market approaches empower the locality of generating, consuming and trading energy in a local market and therefore minimize transportation as well as scale down supply and demand balancing to a local network. Local energy markets claim to be more flexible regarding near real-time energy pricing and in choosing an energy supplier. Furthermore, their prospect a more transparent way sof energy consumption in general, but they are rather small-scale and geographically constrained. Moreover, local energy markets are very promising as the propose possible energy cost reduction and an advance of the local economy as revenue is kept withing the local community. This profit should be meant to be reinvested into renewable energy sources in order to boost the local energy community.\cite{mengelkamp_lem} \newline
In order to provide a larger scale system, e.g. in national scale, multiple local energy markets could be interconnected, which comes with many advantages and open challenges to be address. Mengelkamp et al. \cite{mengelkamp_lem} analyzed and designed a decentralized local energy market that is based on Blockchain technology. They introduce a local energy market with an operational auction mechanism that defines prices based on entities’ transactions. Hence, prices indicate potential lack of locally generated energy which results in a local network imbalance.
The introduced approach is the first that deals with a prosumer and consumer sided local energy market and focus on trading electricity from private photovoltaic systems.
Blockchain technology is responsible for payment functionalities as well as the market mechanism which is described in the following. \newline
The state of the current market is hold in a closed order book that has discrete market closing times. After such market clearing, the energy price for the next time slot is established and consumers can order electricity at the market price and retrieve the purchased amount of electricity, which is indeed a prosumer’s surplus that also participates in the local energy markets. In case of market imbalances, such that demand and supply cannot be completely addressed by the local energy market, entities have to trade electricity with electricity providers using the connected distribution grid. Thus, electricity providers are major contributors to the stability of the local energy system. Furthermore, the upper and lower market price limits are obtained from the distribution grid’s energy price and selling price. The market solution aims for minimizing the local energy markets demand of external grid electricity and therefore maximizes its self-consumption which further minimizes expensive transactions with the distribution grid. This grid acts as a prosumer which is able to issue an arbitrary amount of orders and bits within the system. 
To forecast demand and supply, the respective Blockchain accounts store only information about demand and surplus of entities alongside with their financial balances, which further allows the system to calculate a user specific utility function that is taken into account in case of placing orders. Storing just overall surplus and demand should only have a minimum impact in users’ privacy, but sufficient for obtaining consumption patterns used for predictions. \cite{mengelkamp_lem} \newline
Electricity payments are fulfilled by the system at clearing times and statistical market information is broadcasted to all market entities. Virtual trading of electricity does not directly influence the physical electricity exchange as this is done via the physical distribution grid itself. \newline
The described local energy market has been simulated using 100 residential households and 15 minutes time slots between market clearings. The market mechanism itself has been implemented as smart contract which is executed on a private Ethereum Blockchain that uses PoW as consensus algorithm and payments as well as bids and orders were issued via the Blockchain. Consumers and prosumers are simulated which order or sell their surplus using their respective account at the Blockchain solution. \newline
This system leads to cheaper electricity prices as they are a weighted combination of smaller local prices and the price of the electricity provider which is required in times of demand peaks. Another advantage is that it possibly empowers local residentials to install PV systems in order to also participate as prosumer due to the better selling prices. Application of Blockchain in such a market system lowers market prices, decentralizes the marked in general and yields a very high transparency level within the market. \cite{mengelkamp_lem}\newline
This system cannot serve autarky as electricity providers are used to respond to network imbalances.
Nevertheless, this system has severe scaling problems, high latency and a high energy consumption, as PoW is used as consensus algorithm. Therefore, a lot of improvements have to be made and technical challenges to be solved to make this system practically applicable.


\subsection{NRGcoin}
Another very interesting group of Blockchain applications in the energy sector are based on cryptocurrencies, where assets are incentivized by transferring them in coins.
Mihaylov et al. \cite{mihaylov_nrgcoin} introduced a cryptocurrency called NRGcoin where coins are generated by injecting renewable energy into the grid instead of classical mining approaches which require a lot of computational power. One advantage of this approach over energy markets like \cite{123} \cite{456} is that the proposed market is not time-critical and reward does not depend on the specific time of order placement for pricing. 
Earned NRGcoins through injecting energy surplus can then be used to purchase energy from the distribution system operator if required or can be exchanged for its monetary equivalent at an open exchange market. \newline
As in the other approaches, smart meters at consumer and producer level are required to measure production and consumption rates. This information is then sent to substations of the distribution system operator in 15 minutes intervals and used for obtaining the amount of NRGcoins a prosumer gets for energy production and the amount a consumer is billed.
It is important to know, that consumers, prosumers and the substations has to run the NRGcoin protocol. Furthermore, variable consumption and production rates are used to provide better rates to agents to aim in meeting the current demand and supply and therefore try to keep the network stable. \cite{mihaylov_nrgcoin}

\subsubsection{NRGcoin System Overview:} Prosumers generate a surplus of renewable energy, feed this energy into the grid and send the information about this process to every node withing the NRGcoin network in order to update the distributed ledger. Prosumers then get reward from two entities, the connected substation and the NRG protocol itself. This reward is issued per time window and a substations reward NRGcoins based on the production and consumption of the prosumer and the NRG protocol rewards a certain amount to make new money enter the system to prevent NRGcoin from being deflationary. \newline
An interesting aspect about NRGcoins is that their value is decoupled from their monetary market values and fed in renewable energy is just converted into NRGcoins applying two functions defined by Mihaylov et al. \cite{mihaylov_nrgcoin}. This mechanism decouples the rewarded NRGcoins from the expected monetary earnings. Due to the defined functions, a prosumer that feeds in energy at a timeslot of high demand gets a greater reward than feeding in at a time of energy surplus. The same prosumer will maximize earning on his NRGcoins by consuming energy in a timeslot of high supply. \newline
As already mentioned, NRGcoins can be used to buy electricity from the distribution system operator. Moreover, there is an exchange market where agents can sell certain amounts of NRGcoins in exchange for fiat currencies. Consumers, that for example do not have any kind of renewable energy source installed, can purchase NRGcoins and further exchange them for electricity by their distribution system operator. This exchange market has quite similar features as proposed by Ilic et al. \cite{ilic_smart_grid_neighbourhoods}.
Consumers pay a certain amount of NRGcoins to meet the required electricity demand. This amount of coins to be transferred to the distribution system operator is also obtained from a specific function. Thus, the operation of the NRGcoin protocol can be configured by three functions that are responsible for rewarding NRGcoins to prosumers, keeping the currency deflationary and purchasing coins from consumers. \cite{mihaylov_nrgcoin}
Moreover, the exchange market makes profit from possible commission fees as well as from the difference between sell and buy bids that were matched.

\subsubsection{Advantages} of the NRGcoin protocol can be found in demand and supply balancing as the system aims to shift the consumers demand to production peaks by applying variable rates and therefore agents aim for balancing the system out of self-interest. \newline
Another positive aspect is, that the role of the distribution system operator remains very important as reliable forecasting techniques are required to meet demand in cases where the system will be imbalanced. Therefore, this entity will be responsible for providing external energy. Furthermore, distribution system operators will have a greater amount of money to invest in their network, because they reward prosumers with NRGcoins instead of fiat currency. Another important point is, that deploying the NRGcoin protocol might only require installation of smart meters and make substations smart instead of restructuring the whole distribution system’s infrastructure. \newline
As NRGcoins only represent the amount of fed in renewable energy they can act as an international currency for green energy instead of only being a certificate for green energy consumption. Due to the deflationary mechanism and the asset representation the coins become time independent and can be used in the future to consume the same amount of energy that has been fed in in the past. \cite{mihaylov_nrgcoin}

\subsubsection{Challenges} arise from the dependence of the NRGcoin on its community, as with many other cryptocurrencies. Market speculations and savings of a huge amount of coins can lead to great fluctuations in its trade value. Another challenge will be the integration of the NRGcoin protocol at distribution system operators and in a way larger scale. The amount of smart local substations enables good scalability of this system. \cite{mihaylov_nrgcoin} \newline
Additionally, a big challenge for large scale applications will be to design the right blockchain setup to meet certain throughput and uptake rate \cite{mihaylov_nrgcoin2}.


Finally, the researchers \cite{mihaylov_nrgcoin} built a demonstration platform of their system as proposed on their website \cite{nrgcoin_demo}. Unfortunately, the simulation results are not discussed. Nevertheless, this yields a very promising and sustainable approach to integrate renewable energy sources in a large scale with the use of blockchain, without the need of massive infrastructure adoptions.


\section{Non-Blockchain based Decentralized Energy Markets}
This section aims for introducing and discussing research and solutions regarding decentralized energy markets without application of Blockchain technology. Moreover, approaches that tackle the same goal as the related Blockchain based solution are discussed.

\subsection{Local Energy Market}
Ilic et al. \cite{ilic_smart_grid_neighbourhoods} discusses the concept of a local energy market approach that has the same goal as Mengekkamp et al. \cite{mengelkamp_lem}, but without the use of Blockchain technology. They propose a local energy market which can be applied in a smart grid in order to reduce electricity costs, transportation costs and losses and maximize the utilization of locally generated renewable energy. They also emphasize that a smart grid with suitable local energy grids/markets can be interconnected to larger regional ones.\newline
Ilic et al. \cite{ilic_smart_grid_neighbourhoods} focus on establishment only on the functioning and simulation of a market system for an autarky microgrid  for local neighborhoods, where prices include the necessary transmission costs and the policies for physical grid usage of distribution grid operators are not explicitly discussed.  
Their market approach is based in the stock exchange model with timeslots of fixed size. Orders (buys and sells of electricity) are stored in an order book which is made public together with the price for the last transaction. This enables every entity to obtain the global state and underlines a decentralized approach. Mengelkamp et al. \cite{mengelkamp_lem} used a closed order book and gained decentralization buy using Blockchain technology. One very important aspect which is taken into account by Ilic et al. \cite{ilic_smart_grid_neighbourhoods} is that each prosumer and consumer must be able to predict the possible surplus or demand for future timeslots. Prosumers and consumers can place orders on the market, which are updateable within the certain timeslot due to possible faulty predictions. The discussed matching process tries to match new orders in a way that the price of a buy order is required to be greater or equal to a sell order. Furthermore, also partial matches are possible if the demand cannot be fully matched withing the current timeslot. The unmatched part of the order is kept in the order book for the next timeslot. The matching process is based on First-Come First-Serve and therefore early orders within a timeslot have a severe advantage for the corresponding user, which also leads to certain price fluctuations. Orders which remain unmatched at the end of a timeslot are cancelled. \newline
Ilic et al. \cite{ilic_smart_grid_neighbourhoods} defined the inside market to be the gap between the highest buy and the lowest sell price and states that the market’s consensus is centered within this boundaries for the given timeslot. Newly submitted orders should have prices within the inside market.
One important market property is the prediction of the possible market movement which is done either based on imbalances in the order book or short-term patterns within a timeslot or based on information about the inside market. Such data can be used to predict consumer and prosumer behavior and effects on the market. \newline
Security concerns regarding the use of an open order book are not addressed in detail, but information that can be accessed by a user is restricted to the corresponding credentials. Moreover, this market approach requires a user registration process which obtains the users’ identities in order to not have any malicious user participating in the local market. \newline
Ilic et al. \cite{ilic_smart_grid_neighbourhoods} simulated the discussed market approach using a Java implementation of the market under certain parameter and agent settings. The simulation shows desired market behavior as prices decreased on oversupply and increased on greater electricity demand. They further notice that price fluctuations are high which results from a bigger inside market. Besides those fluctuations the allocative efficiency stays high which means that there is still a lot of trade going on even though price stability is not guaranteed. \newline
This work shows a concept and simulation which provides useful data about a working decentralized energy market without the application of Blockchain technology. Although, such markets can automatically respond to supply and demand imbalance by price adoption, there will most likely be the situation in a real application that demand cannot be met by supply and external electricity is required as mentioned by Mengelkamp et al. \cite{mengelkamp_lem}. Besides that, scalability of the introduced market system is also not taken into account. This work gives great insight into how a local energy market can work from an economic point of view, but there are many open challenges to be addressed.


\section{Conclusion}

TODO

%
% ---- Bibliography ----
%
% BibTeX users should specify bibliography style 'splncs04'.
% References will then be sorted and formatted in the correct style.
%
% \bibliographystyle{splncs04}
% \bibliography{mybibliography}
%
\begin{thebibliography}{8}
\bibitem{eu_energy_market}
European Parliament Homepage, \url{https://www.europarl.europa.eu/RegData/etudes/BRIE/2016/593519/EPRS\_BRI(2016)593519\_EN.pdf}. Last accessed 7 Nov 2020

\bibitem{mengelkamp_lem}
E. Mengelkamp, B. Notheisen, C. Beer, D. Dauer, C. Weinhardt: A blockchain-based smart grid: towards sustainable local energy markets. In:  Computer Science - Research and Development, vol. 33, no. 1-2, pp. 207-214, 2018. \doi{10.1007/s00450-017-0360-9}

\bibitem{ilic_smart_grid_neighbourhoods}
D. Ilic, P. Goncalves Da Silva, S. Karnouskos, M. Griesemer: An energy market for trading electricity in smart grid neighbourhoods. In: 6th IEEE International Conference on Digital Ecosystems and Technologies, Campione d'Italia, Italy, pp. 1-6, 2012. \doi{10.1109/DEST.2012.6227918}

\bibitem{mihaylov_nrgcoin}
M. Mihaylov, S. Jurado, N. Avellana, K. Van Moffaert, I. M. de Abril and A. Nowé: NRGcoin: Virtual Currency for Trading of Renewable Energy in Smart Grids. In: 11th International Conference on the European Energy Market (EEM14), Krakow, pp. 1-6, 2014. \doi{10.1109/EEM.2014.6861213}

\bibitem{mihaylov_nrgcoin2}
Mihail Mihaylov, Iván Razo-Zapata, Ann Nowé: NRGcoin—A Blockchain-based Reward Mechanism for Both Production and Consumption of Renewable Energy. In: Transforming Climate Finance and Green Investment with Blockchains, Academic Press, pp. 111-131, 2018.
\doi{10.1016/B978-0-12-814447-3.00009-4}

\bibitem{nrgcoin_demo}
NRGcoin Homepage, \url{https://nrgcoin.org/demonstration/}. Last accessed 13. Nov 2020

\bibitem{ref_article1}
Author, F.: Article title. Journal \textbf{2}(5), 99--110 (2016)

\bibitem{ref_lncs1}
Author, F., Author, S.: Title of a proceedings paper. In: Editor,
F., Editor, S. (eds.) CONFERENCE 2016, LNCS, vol. 9999, pp. 1--13.
Springer, Heidelberg (2016). \doi{10.10007/1234567890}

\bibitem{ref_book1}
Author, F., Author, S., Author, T.: Book title. 2nd edn. Publisher,
Location (1999)

\bibitem{ref_proc1}
Author, A.-B.: Contribution title. In: 9th International Proceedings
on Proceedings, pp. 1--2. Publisher, Location (2010)

\bibitem{ref_url1}
LNCS Homepage, \url{http://www.springer.com/lncs}. Last accessed 4
Oct 2017
\end{thebibliography}
\end{document}
